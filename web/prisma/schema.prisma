generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "sqlite"
	url      = env("DATABASE_URL")
}

model User {
	id        String    @id @default(cuid())
	email     String    @unique
	name      String?
	image     String?
	createdAt DateTime  @default(now())
	updatedAt DateTime  @updatedAt
	badges    UserBadge[]
	scores    Score[]
}

model Badge {
	id          String      @id @default(cuid())
	code        String      @unique
	name        String
	description String?
	users       UserBadge[]
}

model UserBadge {
	id        String   @id @default(cuid())
	userId    String
	badgeId   String
	createdAt DateTime @default(now())

	user  User  @relation(fields: [userId], references: [id], onDelete: Cascade)
	badge Badge @relation(fields: [badgeId], references: [id], onDelete: Cascade)

	@@unique([userId, badgeId])
}

model Game {
	id   String @id @default(cuid())
	key  String @unique
	name String
	
	scores Score[]
}

model Score {
	id        String   @id @default(cuid())
	userId    String
	gameId    String
	value     Int
	createdAt DateTime @default(now())

	user User @relation(fields: [userId], references: [id], onDelete: Cascade)
	game Game @relation(fields: [gameId], references: [id], onDelete: Cascade)
}


